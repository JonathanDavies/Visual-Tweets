<!DOCTYPE html>
<html>
<body>
<input id="message" type="text"/>
<input type="submit" value="send" onclick="send()"/>

<div id="messages"></div>

<script type="text/javascript">
    var webSocket = new WebSocket('ws://localhost:8080/tweetSocket');

    webSocket.onerror = function (event) {
        alert(event.data);
    };

    webSocket.onopen = function (event) {
        displayMessage('Connection established');
    };

    webSocket.onmessage = function (event) {
        displayMessage(event.data);
    };

    function displayMessage(message) {
        var obj = JSON.parse(message);

        var messageDiv = document.getElementById('messages')

        var newP = document.createElement("p");
        newP.appendChild(document.createTextNode(obj.text));
        messageDiv.appendChild(newP);

        setTimeout(function () {
            newP.remove();
        }, 5000);
    }

    function send() {
        var txt = document.getElementById('message').value;
        webSocket.send(txt);
        return false;
    }
</script>
</body>

</html>